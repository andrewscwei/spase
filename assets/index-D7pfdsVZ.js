(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const y of c.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function s(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(n){if(n.ep)return;n.ep=!0;const c=s(n);fetch(n.href,c)}})();var w;(t=>{t.zero=o();function o(e=0,h=0){if(typeof e=="number")return{x:e,y:h};if(!$(e))throw Error("Invalid parameters passed to constructor");return e instanceof Array?{x:e[0],y:e[1]}:{x:e.x,y:e.y}}t.make=o;function s(e,h={}){return o({x:typeof h.x=="number"?h.x:e.x,y:typeof h.y=="number"?h.y:e.y})}t.clone=s;function a(e,h){return o({x:e.x+h.x,y:e.y+h.y})}t.add=a;function n(e,h){return o({x:e.x-h.x,y:e.y-h.y})}t.subtract=n;function c(e,h){return o({x:e.x*h.x,y:e.y*h.y})}t.multiply=c;function y(e,h){return o({x:e.x/h.x,y:e.y/h.y})}t.divide=y;function g(e){return o({x:e.y,y:e.x})}t.reflect=g;function b(e,h){return!(e.x!==h.x||e.y!==h.y)}t.isEqual=b;function x(e){return`Point(x=${e.x}, y=${e.y})`}t.toString=x;function S(e){return Object.freeze({x:e.x,y:e.y})}t.toJSON=S;function q(e){return[e.x,e.y]}t.toArray=q;function $(e){return e instanceof Array?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):typeof e=="object"?!(typeof e.x!="number"||typeof e.y!="number"):!1}t.isValidDescriptor=$;function H(e){return typeof e=="object"&&typeof e.x=="number"&&typeof e.y=="number"}t.isPoint=H;function T(e){return e.x===0&&e.y===0}t.isZero=T})(w||(w={}));function G(t,o){try{const s=w.isValidDescriptor(t)&&w.make(t),a=w.isValidDescriptor(o)&&w.make(o);if(s&&!a){const n=o instanceof Array?o:[o],c=n.length;for(let y=0;y<c;y++){const g=p.from(n[y]);if(!g)continue;const b=s.x>=g.left&&s.x<=g.right,x=s.y>=g.top&&s.y<=g.bottom;if(b&&x)return!0}return!1}else if(!s&&a){const n=t instanceof Array?t:[t],c=n.length;for(let y=0;y<c;y++){const g=p.from(n[y]);if(!g)continue;const b=a.x>=g.left&&a.x<=g.right,x=a.y>=g.top&&a.y<=g.bottom;if(b&&x)return!0}return!1}else{if(s&&a)return w.isEqual(s,a);{const n=[...t instanceof Array?t:[t],...o instanceof Array?o:[o]],c=p.intersecting.apply(null,n);return c?c.width*c.height!==0:!1}}}catch(s){return console.error(s),!1}}var V;(t=>{t.zero=o();function o(e=0,h=0){if(typeof e=="number")return{height:h,width:e};if(!$(e))throw Error("Invalid parameters passed to constructor");return e instanceof Array?{height:e[1],width:e[0]}:{height:e.height,width:e.width}}t.make=o;function s(e,h={}){return o({height:typeof h.height=="number"?h.height:e.height,width:typeof h.width=="number"?h.width:e.width})}t.clone=s;function a(e,h){return o({height:e.height+h.height,width:e.width+h.width})}t.add=a;function n(e,h){return o({height:e.height-h.height,width:e.width-h.width})}t.subtract=n;function c(e,h){return o({height:e.height*h.height,width:e.width*h.width})}t.multiply=c;function y(e,h){return o({height:e.height/h.height,width:e.width/h.width})}t.divide=y;function g(e){return o({height:e.width,width:e.height})}t.rotate=g;function b(e,h){return!(e.width!==h.width||e.height!==h.height)}t.isEqual=b;function x(e){return`Size(width=${e.width}, height=${e.height})`}t.toString=x;function S(e){return Object.freeze({height:e.height,width:e.width})}t.toJSON=S;function q(e){return[e.width,e.height]}t.toArray=q;function $(e){return e instanceof Array?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):typeof e=="object"?!(typeof e.width!="number"||typeof e.height!="number"):!1}t.isValidDescriptor=$;function H(e){return typeof e=="object"&&typeof e.width=="number"&&typeof e.height=="number"}t.isSize=H;function T(e){return e.width===0&&e.height===0}t.isZero=T})(V||(V={}));var p;(t=>{t.zero=o();function o(r=0,i=0,u=0,d=0){if(typeof r=="number"&&typeof i=="number"){const l=r,m=i;return{bottom:m+d,height:d,left:l,right:l+u,top:m,width:u}}else if(w.isPoint(r)&&V.isSize(i)){const l=r,m=i;return{bottom:l.y+m.height,height:m.height,left:l.x,right:l.x+m.width,top:l.y,width:m.width}}else{const l=r;if(!k(l))throw Error("Invalid parameters passed to constructor");return{bottom:l.y+l.height,height:l.height,left:l.x,right:l.x+l.width,top:l.y,width:l.width}}}t.make=o;function s(r){return w.make({x:(r.right-r.left)/2+r.left,y:(r.bottom-r.top)/2+r.top})}t.center=s;function a(r){return V.make({height:r.height,width:r.width})}t.size=a;function n(r,i={}){try{if(r==null)return t.zero;if(B(r))return r;if(z(r))return n(document.documentElement||document.body.parentNode||document.body,i);const u=r instanceof Array?r:[r],d=u.length,l=i.reference||window,m=c(),j=z(l)?m:n(i.reference);if(!m||!j)return t.zero;let N;for(let R=0;R<d;R++){const L=u[R],O=L.getBoundingClientRect(),C=o({height:i.overflow?L.scrollHeight:L instanceof HTMLElement?L.offsetHeight:O.height,width:i.overflow?L.scrollWidth:L instanceof HTMLElement?L.offsetWidth:O.width,x:O.left+m.left-(z(l)?0:j.left),y:O.top+m.top-(z(l)?0:j.top)});N=N?$(N,C):C}return N??t.zero}catch(u){return console.error(u),t.zero}}t.from=n;function c(){const r=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0),u=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,d=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return o({height:i,width:r,x:u,y:d})}t.fromViewport=c;function y(r,i={}){return r?z(r)?n(Array.from(document.body.children)):n(Array.from(r.children),{overflow:i.overflow,reference:i.reference||r}):t.zero}t.fromChildrenOf=y;function g(r,i,u={}){if(!i)return t.zero;const d=Array.from(i.children);return r<=0?o():r>=d.length?n(d,{overflow:!1,reference:u.reference}):(d.splice(r),n(d,{overflow:!1,reference:u.reference||i}))}t.fromChildrenBefore=g;function b(r,i,u={}){if(!i)return t.zero;const d=Array.from(i.children);return r<0?n(d,{overflow:!1,reference:u.reference}):r>=d.length-1?o():(d.splice(0,d.length-r-1),n(d,{overflow:!1,reference:u.reference||i}))}t.fromChildrenAfter=b;function x(r,i,u={}){if(!i)return t.zero;const d=i.children[r];return n(d,{overflow:u.overflow,reference:u.reference||i})}t.fromChildAt=x;function S(...r){try{const i=r.length,u={};let d,l;for(let m=0;m<i;m++){if(d||(d=n(r[m])),m===0&&m+1===i)l=c();else if(m+1<i)l=n(r[m+1]);else break;!d||!l||(u.width=Math.max(0,Math.min(d.right,l.right)-Math.max(d.left,l.left)),u.height=Math.max(0,Math.min(d.bottom,l.bottom)-Math.max(d.top,l.top)),u.y=Math.max(d.top,l.top),u.x=Math.max(d.left,l.left),u.width*u.height===0&&(u.width=0,u.height=0,u.y=NaN,u.x=NaN),d=o(u))}return o(u)}catch(i){return console.error(i),t.zero}}t.intersecting=S;function q(r,i={}){return o({height:typeof i.height=="number"?i.height:r.height,width:typeof i.width=="number"?i.width:r.width,x:typeof i.x=="number"?i.x:r.left,y:typeof i.y=="number"?i.y:r.top})}t.clone=q;function $(r,i){return o({height:Math.max(r.bottom,i.bottom)-Math.min(r.top,i.top),width:Math.max(r.right,i.right)-Math.min(r.left,i.left),x:Math.min(r.left,i.left),y:Math.min(r.top,i.top)})}t.concat=$;function H(r){return o({height:r.width,width:r.height,x:r.left,y:r.top})}t.rotate=H;function T(r,i){return!(r.top!==i.top||r.right!==i.right||r.bottom!==i.bottom||r.left!==i.left||r.width!==i.width||r.height!==i.height)}t.isEqual=T;function e(r,i){return G(i,r)}t.contains=e;function h(r){return`Rect(top=${r.top}, right=${r.right}, bottom=${r.bottom}, left=${r.left}, width=${r.width}, height=${r.height})`}t.toString=h;function P(r){return Object.freeze({bottom:r.bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width})}t.toJSON=P;function k(r){return!(typeof r.x!="number"||typeof r.y!="number"||typeof r.width!="number"||typeof r.height!="number")}t.isValidDescriptor=k;function B(r){return typeof r=="object"&&typeof r.top=="number"&&typeof r.right=="number"&&typeof r.bottom=="number"&&typeof r.left=="number"&&typeof r.width=="number"&&typeof r.height=="number"}t.isRect=B;function D(r){return r.top===0&&r.right===0&&r.bottom===0&&r.left===0&&r.width===0&&r.height===0}t.isZero=D})(p||(p={}));function z(t){return t===window}const M=document.getElementById("main"),E=document.getElementById("intersection"),A=document.getElementById("viewport"),I=Array.from(document.querySelectorAll("#main .box"));window.localStorage.debug="spase*";window.addEventListener("resize",()=>v());window.addEventListener("scroll",()=>v());I.forEach(t=>{let o,s=w.make(),a,n=!1;t.addEventListener("pointerdown",c=>{o=w.make({x:c.clientX-s.x,y:c.clientY-s.y}),c.target===t&&(n=!0),v()}),window.addEventListener("pointermove",c=>{n&&(c.preventDefault(),a=w.make(c.clientX-o.x,c.clientY-o.y),s=a,t.style.transform=`translate3d(${a.x}px, ${a.y}px, 0)`,v())}),t.addEventListener("pointerup",()=>{o=a,n=!1,v()})});function v(){W(),J(),X(),Y()}function W(){const t=p.fromViewport(),o=p.from(window,{overflow:!0});A.querySelector(".top").innerHTML=`${f(t.top)}`,A.querySelector(".right").innerHTML=`${f(t.right)}`,A.querySelector(".bottom").innerHTML=`${f(t.bottom)}`,A.querySelector(".left").innerHTML=`${f(t.left)}`,A.querySelector(".size").innerHTML=`${f(t.width)}x${f(t.height)}<br>${f(o.width)}x${f(o.height)}`}function J(){const t=p.from(M),o=p.from(I,{reference:M});M.querySelector(".top").innerHTML=`${f(t.top)}<br>(${f(o.top)})`,M.querySelector(".right").innerHTML=`${f(t.right)}<br>(${f(o.right)})`,M.querySelector(".bottom").innerHTML=`${f(t.bottom)}<br>(${f(o.bottom)})`,M.querySelector(".left").innerHTML=`${f(t.left)}<br>(${f(o.left)})`,M.querySelector(".size").innerHTML=`${f(t.width)}x${f(t.height)}<br>(${f(o.width)}x${f(o.height)})`}function X(){I.forEach(t=>{const o=p.from(t),s=p.from(t,{reference:M}),a=p.from(t,{overflow:!0}),n=p.intersecting(t);t.querySelector(".top").innerHTML=`G:${f(o.top)}<br>L:${f(s.top)}<br>V:${f(n.top)}`,t.querySelector(".right").innerHTML=`G:${f(o.right)}<br>L:${f(s.right)}<br>V:${f(n.right)}`,t.querySelector(".bottom").innerHTML=`G:${f(o.bottom)}<br>L:${f(s.bottom)}<br>V:${f(n.bottom)}`,t.querySelector(".left").innerHTML=`G:${f(o.left)}<br>L:${f(s.left)}<br>V:${f(n.left)}`,t.querySelector(".size").innerHTML=`G:${f(o.width)}x${f(o.height)}<br>L:${f(a.width)}x${f(a.height)}<br>V:${f(n.width)}x${f(n.height)}`})}function Y(){const t=p.intersecting(...I);t.width*t.height>0?E.classList.add("active"):E.classList.remove("active"),E.querySelector(".top").innerHTML=`${f(t.top)}`,E.querySelector(".right").innerHTML=`${f(t.right)}`,E.querySelector(".bottom").innerHTML=`${f(t.bottom)}`,E.querySelector(".left").innerHTML=`${f(t.left)}`,E.querySelector(".size").innerHTML=`INTERSECTING<br>${f(t.width)}x${f(t.height)}`}function f(t){return Math.round(t*100)/100}v();
